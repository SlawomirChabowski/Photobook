<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    
    <!-- Localisation -->
    <f:loadBundle basename="locales.locale" var="msg" />

    <h:head>
        <!-- Bootstrap -->
        <link rel="stylesheet"
              href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css"
              integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb"
              crossorigin="anonymous" />
        
        <!-- Custom CSS -->
        <h:outputStylesheet name="/css/mainLayout.css" />
        <h:outputStylesheet name="/css/profileStylesheets.css" />
        <h:outputStylesheet name="/css/flagIcons.css" />
        <h:outputStylesheet name="/css/galleryView.css" />
        <h:outputStylesheet name="/css/imageLayout.css" />
        
        <!-- Mobile devices integration -->
        <meta name="viewport"
              content="width=device-width, initial-scale=1" />
        
        <!-- Character encoding -->
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Photobook</title>
    </h:head>

    <h:body>
        <div id="main_header" class="bg-info text-light">
            <a href="javascript:void(0);" id="toggle_menu_button" onClick="
                var lcol = document.getElementById('left_column');
                
                if(lcol.style.display !== 'block') {
                    lcol.style.animation = 'fadein 0.2s';
                    lcol.style.display = 'block';
                }
                else {
                    lcol.style.animation = 'fadeout 0.2s';
                    setTimeout(function() {lcol.style.display = 'none'}, 200);
                }
            ">☰</a>
            <header><h1><h:link value="Photobook" outcome="index"></h:link></h1></header>
        </div>
        
        <nav id="left_column">
            
            <!-- When logged in -->
            <h:form rendered="#{login.logged}">
                <div id="login_box">
                    <div class="row" style="margin-bottom: 10px;">

                        <div class="col-sm-5">

                            <h:graphicImage class="avatar_image rounded-circle" value="resources/#{login.avatarUrl}" alt="#{msg.sidebar_usersAvatar}" />

                        </div>

                        <div class="col-sm-7">

                            <p class="logged_in_message">
                                #{msg.sidebar_loggedIn}:
                                <br />

                                <a href="#">
                                    <strong>#{login.userName}</strong>
                                </a>
                            </p>

                            <ul id="profile_navigation" class="logged_in_message">
                                <li><a href="#">#{msg.sidebar_addNew}</a></li>
                                <li><a href="#">#{msg.sidebar_goToSettings}</a></li>
                            </ul>

                        </div>

                    </div>

                    <h:commandButton class="btn btn-block btn-sm btn-danger" value="#{msg.sidebar_logoutMessage}" action="#{login.logout()}" />
                </div>
            </h:form>
            <!-- End when logged in -->

            <!-- When not logged in -->
            <h:form rendered="#{not login.logged}">
                <div id="login_box">
                    #{msg.sidebar_notLoggedIn}
                    <div class="btn-group" role="group">
                        <h:button class="btn btn-light" value="#{msg.sidebar_login}" outcome="login"></h:button>
                        <h:button class="btn btn-primary" value="#{msg.sidebar_register}" outcome="register"></h:button>
                    </div>
                </div>
            </h:form>
            <!-- End when not logged in -->

            <hr />

            <nav>
                <ul id="left_bar_navigation">
                    <li><h:button value="View profile" outcome="viewProfile" class="btn-space btn btn-sm btn-block btn-outline-info"></h:button></li>
                    <li><h:button value="View image" outcome="viewImage" class="btn-space btn btn-sm btn-block btn-outline-info"></h:button></li>
                </ul>
            </nav>

            <hr />

            <aside class="center_flags">
                <h:form>
                    <h:commandButton class="flag flag_pl" action="#{language.polish}" />
                    <h:commandButton class="flag flag_gb" action="#{language.english}" />
                </h:form>
            </aside>

            <footer>
               #{msg.sidebar_authors}: Sławomir Chabowski, Wojciech Byczyński
            </footer>
        </nav>
        
        <div class="container" style="padding-top: 65px;">

            <div id="main">
                <ui:insert name="content"></ui:insert>
            </div>

        </div>
    </h:body>

</html>
